name: comprehensive-pr-review
description: |
  Use when: User wants a comprehensive code review of a pull request with automatic fixes.
  Triggers: "review this PR", "review PR #123", "comprehensive review", "full PR review",
            "review and fix", "check this PR", "code review".
  Does: Syncs PR with main (rebase if needed) -> runs 5 specialized review agents in parallel ->
        synthesizes findings -> auto-fixes CRITICAL/HIGH issues -> reports remaining issues.
  NOT for: Quick questions about a PR, checking CI status, simple "what changed" queries.

  This workflow produces artifacts in .archon/artifacts/reviews/pr-{number}/ and posts
  a comprehensive review comment to the GitHub PR.

provider: claude
model: sonnet

steps:
  - command: pr-review-scope

  - command: sync-pr-with-main

  - parallel:
      - command: code-review-agent
      - command: error-handling-agent
      - command: test-coverage-agent
      - command: comment-quality-agent
      - command: docs-impact-agent

  - command: synthesize-review

  - command: implement-review-fixes
